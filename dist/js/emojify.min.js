/*! emojify.js - v1.1.0 - 
 * Copyright (c) Hassan Khan 2016
 */
!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.emojify=t()}(this,function(){"use strict";var e=function(){function e(){var e={named:/:([a-z0-9A-Z_-]+):/,heart:/<3|&lt;3/g,broken_heart:/<\/3|&lt;&#x2F;3/g,blush:/:-?\)/g,smile:/:-?d/gi,wink:/;-?\)/g,disappointed:/:-?\(/g,cry:/:['â€™]\(/g,smiley:/=-?\)/g,kissing_heart:/:-?\*/g,laughing:/:-?\\>/g,sunglasses:/8-?\)/g,confused:/:-?[\\\/]/g,neutral_face:/:-?\|/g,monkey_face:/:o\)/gi,open_mouth:/:-?o/gi,angry:/\\>:-?\(/gi,stuck_out_tongue:/:-?[pb]/gi,stuck_out_tongue_winking_eye:/;-?[pb]/gi,stuck_out_tongue_closed_eyes:/x-?[pb]/gi,smirk:/[:;]-?]/g,rage:/:-?[\[@]/g,confounded:/:-?s/gi,relaxed:/:-?\$/g};return d.ignore_emoticons&&(e={named:/:([a-z0-9A-Z_-]+):/}),Object.keys(e).map(function(t){return[e[t],t]})}function t(){var e=s.map(function(e){var t=e[0],n=t.source||t;return n=n.replace(/(^|[^\[])\^/g,"$1"),"("+n+")"}).join("|");return new RegExp(e,"gi")}function n(e){return" "===e||"	"===e||"\r"===e||"\n"===e||""===e||e===String.fromCharCode(160)}function i(e){var t=null;if(e.replacer)t=e.replacer.apply({config:d},[":"+e.emojiName+":",e.emojiName]);else{var n=d.tag_type||g[d.mode];t=e.win.document.createElement(n),"img"!==n?t.setAttribute("class","emoji emoji-"+e.emojiName):(t.setAttribute("align","absmiddle"),t.setAttribute("alt",":"+e.emojiName+":"),t.setAttribute("class","emoji"),t.setAttribute("src",d.img_dir+"/"+e.emojiName+".png")),t.setAttribute("title",":"+e.emojiName+":")}e.node.splitText(e.match.index),e.node.nextSibling.nodeValue=e.node.nextSibling.nodeValue.substr(e.match[0].length,e.node.nextSibling.nodeValue.length),t.appendChild(e.node.splitText(e.match.index)),e.node.parentNode.insertBefore(t,e.node.nextSibling)}function r(e){if(e[1]&&e[2])return e[2];for(var t=3;t<e.length-1;t++)if(e[t])return s[t-2][1]}function a(e,t){var n=this.config.tag_type||g[this.config.mode];return"img"!==n?"<"+n+" class='emoji emoji-"+t+"' title=':"+t+":'></"+n+">":"<img align='absmiddle' alt=':"+t+":' class='emoji' src='"+this.config.img_dir+"/"+t+".png' title=':"+t+":' />"}function o(){this.lastEmojiTerminatedAt=-1}function l(n,i){if(!n)return n;i||(i=a),s=e(),c=t();var r=new o;return n.replace(c,function(){var e=Array.prototype.slice.call(arguments,0,-2),t=arguments[arguments.length-2],n=arguments[arguments.length-1],a=r.validate(e,t,n);return a?i.apply({config:d},[arguments[0],a]):arguments[0]})}function u(n,a){"undefined"==typeof n&&(n=d.only_crawl_id?document.getElementById(d.only_crawl_id):document.body);var l=n.ownerDocument,u=l.defaultView||l.parentWindow,g=function(e,t){var n;if(e.hasChildNodes())for(n=e.firstChild;n;)t(n)&&g(n,t),n=n.nextSibling},m=function(e){for(var t,n=[],l=new o;null!==(t=c.exec(e.data));)l.validate(t,t.index,t.input)&&n.push(t);for(var s=n.length;s-- >0;){var d=r(n[s]);i({node:e,match:n[s],emojiName:d,replacer:a,win:u})}};s=e(),c=t();var f=[],p=new RegExp(d.blacklist.elements.join("|"),"i"),h=new RegExp(d.blacklist.classes.join("|"),"i");if("undefined"!=typeof u.document.createTreeWalker)for(var _,y=u.document.createTreeWalker(n,u.NodeFilter.SHOW_TEXT|u.NodeFilter.SHOW_ELEMENT,function(e){return 1!==e.nodeType?u.NodeFilter.FILTER_ACCEPT:e.tagName.match(p)||"svg"===e.tagName||e.className.match(h)?u.NodeFilter.FILTER_REJECT:u.NodeFilter.FILTER_SKIP},!1);null!==(_=y.nextNode());)f.push(_);else g(n,function(e){return"undefined"!=typeof e.tagName&&e.tagName.match(p)||"undefined"!=typeof e.className&&e.className.match(h)?!1:1===e.nodeType?!0:(f.push(e),!0)});f.forEach(m)}var s,c,d={blacklist:{ids:[],classes:["no-emojify"],elements:["script","textarea","a","pre","code"]},tag_type:null,only_crawl_id:null,img_dir:"images/emoji",ignore_emoticons:!1,mode:"img"},g={img:"img",sprite:"span","data-uri":"span"};return o.prototype={validate:function(e,t,i){function a(){return o.lastEmojiTerminatedAt=s+t,l}var o=this,l=r(e);if(l){var u=e[0],s=u.length;if(e[1])return a();if(0===t)return a();if(i.length===u.length+t)return a();var c=this.lastEmojiTerminatedAt===t;if(c)return a();if(n(i.charAt(t-1)))return a();var d=n(i.charAt(u.length+t));return d&&c?a():void 0}}},{defaultConfig:d,setConfig:function(e){Object.keys(d).forEach(function(t){t in e&&(d[t]=e[t])})},replace:l,run:u}}();return e});